---
import PokemonPicker from "./PokemonPicker.astro";

interface Props {}

const {} = Astro.props;
---

<main
  class="card bg-base-100 shadow-xl border border-base-300 container mx-auto my-10 py-40 flex flex-col items-center gap-3"
>
  <PokemonPicker index="0" />
  <PokemonPicker index="1" />
  <PokemonPicker index="2" />
  <button class="btn btn-primary">Confirm</button>
</main>

<script>
  import * as Colyseus from "colyseus.js";
  var client = new Colyseus.Client("ws://localhost:2567");

  client
    .joinOrCreate("poke_battle")
    .then((room) => {
      console.log(room.sessionId, "joined", room.name);
      room.onStateChange((state) => {
        console.log(room.name, "has new state:", state);
      });
      room.onMessage("message_type", (message) => {
        console.log(room.sessionId, "received on", room.name, message);
      });
      room.onError((code, message) => {
        console.log(room.sessionId, "couldn't join", room.name);
      });
      room.onLeave((code) => {
        console.log(room.sessionId, "left", room.name);
      });
    })
    .catch((e) => {
      console.log("JOIN ERROR", e);
    });
</script>
